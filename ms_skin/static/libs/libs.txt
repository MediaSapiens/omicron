
#content fields
lib.field_intro < styles.content.get
lib.field_intro.select.where = colPos = 0
lib.field_content.select.languageField = sys_language_uid

lib.field_content < styles.content.get
lib.field_content.select.where = colPos = 1
lib.field_content.select.languageField = sys_language_uid

#grid storage
plugin.tx_dce.persistence.storagePid = {$site.storagePid}

lib.mainNavi = HMENU
lib.mainNavi{
    entryLevel = 0
    #wrap = |
    1 = TMENU
    1 {
        expAll = 1
        wrap = <ul class="nav u-mainmenu">|</ul>
        noBlur = 1


		NO{
			wrapItemAndSub = <li>|</li>
			stdWrap.wrap = <span>|</span>
			ATagParams = class="link"
			#ATagTitle.field = subtitle // abstract // description // title
			#doNotLinkIt = 1
		}

		ACT < .NO
        ACT = 1
        ACT.wrapItemAndSub = <li class="active">|</li>
          
		CUR < .ACT
        CUR = 1
        
        IFSUB < .NO
        IFSUB = 1
        IFSUB{
        	stdWrap.wrap = <span>|<i class="icon-chevron"></i></span>
        }

        ACTIFSUB < .IFSUB
        ACTIFSUB = 1
        ACTIFSUB.wrapItemAndSub = <li class="active">|</li>
      
        CURIFSUB < .ACTIFSUB
        CURIFSUB = 1
        
    }

    #2 level
    2 = TMENU
    2 < lib.mainNavi.1
    2{
        wrap = <ul class="submenu">|</ul>
    }

}

lib.footerNavi = HMENU
lib.footerNavi{
    special = directory
    special.value = {$site.footerNavi}
    1 = TMENU
    1 {
        noBlur = 1
        target = blank
        wrap = <ul class="nav u-footermenu">|</ul>
        NO {
          #automatische Verlinkung des Menüs ausschalten
          doNotLinkIt = 1
          wrapItemAndSub=<li>|</li>
          stdWrap.cObject = CASE
          stdWrap.cObject {
             key.field = doktype
             default = TEXT
             default {
                typolink.parameter.field = uid
                #typolink.target = _blank
                field = title
                stdWrap.htmlSpecialChars = 1
             }
             # 4 = shortcut
             4 = TEXT
             4 {
                field = title
                typolink.parameter.field = shortcut
                #typolink.target = _blank
             }
             # 3 = external url
             3 = TEXT
             3 {
                field = title
                typolink.parameter.field = url
                #typolink.extTarget.field = target
                typolink.target = _blank
             }
          }
        }
        ACT < .NO
        ACT = 1
        ACT.wrapItemAndSub=<li class="active">|</li>
    }
}
						<ul class="nav u-langmenu">
							<li class="active"><a href="#">En</a></li>
							<li><a href="#">De</a></li>
							<li><a href="#">Ru</a></li>
						</ul>
#laguage navi
lib.langNavi = COA
lib.langNavi {
    #wrap = <nav class="lang">|</nav>
    10 = HMENU
    10{
        special = language
        special.value = 0,1,2
        special.normalWhenNoLanguage = 0
        wrap = <ul class="nav u-langmenu">|</ul>
        1 = TMENU
        1 {
            noBlur = 1
            # Standard Sprachen
            NO = 1
            NO {
            	wrapItemAndSub = <li>|</li>
                #stdWrap.setCurrent = Deutsch || English
                #stdWrap.current = 1
                # Standard-Titel fur den Link ware Seitenttitel
                # => anderer Text als Link-Text (Optionsschift)
                stdWrap.override = de || en || ru
                # Standardma?ige Verlinkung des Menus ausschalten
                # Da diese sonstige GET-Parameter nicht enthalt
                doNotLinkIt = 1
                # Nun wird der Link mit den aktuellen GET-Parametern neu aufgebaut
                stdWrap.typolink.parameter.data = page:uid
                stdWrap.typolink.additionalParams = &L=0 || &L=1 || &L=2
                stdWrap.typolink.addQueryString = 1
                stdWrap.typolink.addQueryString.exclude = L,id,cHash,no_cache
                stdWrap.typolink.addQueryString.method = GET
                stdWrap.typolink.useCacheHash = 0
                stdWrap.typolink.no_cache = 0
                stdWrap.typolink.ATagParams = class = ""
            }
            # Aktive Sprache
            ACT < .NO
            #ACT.stdWrap.typolink.ATagParams = class="active"
            ACT.wrapItemAndSub = <li class="active">|</li>


            # NO + Übersetzung nicht vorhanden
            USERDEF1 < .NO
            # ACT + Übersetzung nicht vorhanden
            USERDEF2 < .ACT
        }
    }
}


lib.copyright = TEXT
lib.copyright{
	data = date:U
	strftime = %Y
	noTrimWrap = |©  |  {$site.copyright}|
}

lib.contact = TEXT
lib.contact.value = {$site.contact}

#id={$site.rootOfPage}&
lib.logo = TEXT
lib.logo.value = <a class="brand" href="./?L={$config.sys_language_uid}">{$site.copyright}</a>

#######



lib.gridelements.defaultGridSetup { // stdWrap functions being applied to each element
    columns {
        default {
            renderObj = COA
            renderObj {
                # You can use registers to i.e. provide different image settings for each column
                # 10 = LOAD_REGISTER
                20 =< tt_content
                # And you can reset the register later on
                # 30 = RESTORE_REGISTER
            }
        }
    }
    # if you want to provide your own templating, just insert a cObject here
    # this will prevent the collected content from being rendered directly
    # i.e. cObject = TEMPLATE or cObject = FLUIDTEMPLATE will be available from the core
    # the content will be available via fieldnames like
    # tx_gridelements_view_columns (an array containing each column)
    # or tx_gridelements_view_children (an array containing each child)
    # tx_gridelements_view_column_123 (123 is the number of the column)
    # or tx_gridelements_view_child_123 (123 is the UID of the child)
}

lib.tt_content.shortcut.pages = COA
lib.tt_content.shortcut.pages {
    10 = USER
    10 {
        userFunc = tx_gridelements_view->user_getTreeList
    }
    20 = CONTENT
    20 {
        table = tt_content
        select {
            pidInList.data = register:pidInList
            where = colPos >= 0
            orderBy = colPos,sorting
            orderBy.dataWrap = FIND_IN_SET(pid,'{register:pidInList}'),|
        }
    }
}

tt_content.shortcut.5 = LOAD_REGISTER
tt_content.shortcut.5 {
    tt_content_shortcut_recursive.field = recursive
}

tt_content.shortcut.20 {
    0 {
        tables := addToList(pages)
        conf.pages < lib.tt_content.shortcut.pages
    }
    1 {
        tables := addToList(pages)
        conf.pages < lib.tt_content.shortcut.pages
    }
}

plugin.tx_gridelements_pi1 >
tt_content.gridelements_pi1 >
tt_content.gridelements_pi1 = COA
tt_content.gridelements_pi1 {
    #10 =< lib.stdheader
    20 = COA
    20 {
        10 = USER
        10 {
            userFunc = tx_gridelements_view->main
            setup {
                default < lib.gridelements.defaultGridSetup
            }
        }
    }
}

/*
tt_content.gridelements_pi1.20.10.setup {
  1 < lib.gridelements.defaultGridSetup
  1 {
    prepend = COA
    prepend {
      10 = TEXT
      10 {
        data = field:flexform_headline
        typolink.parameter.data = field:flexform_link
        wrap = <h3>|</h3>
      }
      20 = IMAGE
      20 {
        file.import.data = field:flexform_image
        file.width = 200
        file.height = 133c
      }
      30 = COA
      30 {
        10 = TEXT
        10 {
          data = field:flexform_text
          crop = 150 | &nbsp; | 1
        }
        20 = TEXT
        20 {
          value = &nbsp;more...
          typolink.parameter.data = field:flexform_link
        }
        wrap = <p>|</p>
      }
    }
  }
}

*/